<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pulwama VLAN Data</title>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7Y3K72X6BV"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7Y3K72X6BV');
</script>
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.22.9/babel.min.js"></script>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      background-color: #f3f4f6;
    }
    .container {
      max-width: 100%;
      margin: 1rem auto;
      padding: 0 1rem;
    }
    .title {
      font-size: 1.5rem;
      font-weight: bold;
      color: #1f2937;
      text-align: center;
      margin-bottom: 1rem;
    }
    .search-container {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    .search-input, .filter-select, .export-button {
      padding: 0.5rem;
      border: 1px solid #d1d5db;
      border-radius: 0.375rem;
      font-size: 0.875rem;
      width: 100%;
    }
    .search-input:focus, .filter-select:focus {
      outline: none;
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
    }
    .export-button {
      background-color: #3b82f6;
      color: white;
      border: none;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    .export-button:hover {
      background-color: #1d4ed8;
    }
    .table-container {
      overflow-x: auto;
      background-color: white;
      border-radius: 0.375rem;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.75rem;
    }
    th, td {
      padding: 0.5rem;
      text-align: left;
      border-bottom: 1px solid #e5e7eb;
    }
    th {
      background-color: #f9fafb;
      font-weight: bold;
      cursor: pointer;
      white-space: nowrap;
    }
    th:hover {
      background-color: #e5e7eb;
    }
    tr:hover {
      background-color: #f9fafb;
    }
    .sort-icon {
      margin-left: 0.25rem;
      display: inline-block;
    }
    .text-center {
      text-align: center;
    }
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      border: 0;
    }
    @media (min-width: 640px) {
      .container {
        max-width: 90%;
        padding: 0 2rem;
      }
      .title {
        font-size: 1.875rem;
      }
      .search-container {
        flex-direction: row;
        align-items: center;
      }
      .search-input, .filter-select {
        width: auto;
        flex: 1;
      }
      .export-button {
        width: auto;
        padding: 0.5rem 1rem;
      }
      table {
        font-size: 0.875rem;
      }
      th, td {
        padding: 0.75rem;
      }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
      const pulwamaData = [
          {'S No':'1','4G Site ID(B28)-L700':'T4JK28SNPGMP09063002','eNode-B ID B28(L700)':'120921','Site Name':'Salar','Lat':'33.87867','Long':'75.24559','Unique Cluster Name':'Aachbal-Cluster 1','OAM HW GW':'10.140.162.129/28','OAM HW IP':'10.140.162.130','OAM HW VLAN':'195','OAM RAC GW':'10.140.163.129/27','OAM RAC B1(L2100)':'10.140.163.130','OAM RAC B28(L700)':'10.140.163.131','OAM RAC B41(L2500)':'10.140.163.132','OAM RAC VLAN':'196','S1C GW ':'10.140.164.129/27','S1C B1(L2100)':'10.140.164.130','S1C B28(L700)':'10.140.164.131','S1C  B41(L2500)':'10.140.164.132','S1C VLAN ':'197','S1U GW ':'10.140.165.129/27','S1U B1(L2100)':'10.140.165.130','S1U B28(L700)':'10.140.165.131','S1U  B41(L2500)':'10.140.165.132','S1U VLAN':'198'},
        	{'S No':'2','4G Site ID(B28)-L700':'T4JK28SNANTP09NG0129','eNode-B ID B28(L700)':'120146','Site Name':'Nowgam Kothar','Lat':'33.69564','Long':'74.25613','Unique Cluster Name':'Aachbal-Cluster 1','OAM HW GW':'10.140.162.129/28','OAM HW IP':'10.140.162.131','OAM HW VLAN':'195','OAM RAC GW':'10.140.163.129/27','OAM RAC B1(L2100)':'10.140.163.133','OAM RAC B28(L700)':'10.140.163.134','OAM RAC B41(L2500)':'10.140.163.135','OAM RAC VLAN':'196','S1C GW ':'10.140.164.129/27','S1C B1(L2100)':'10.140.164.133','S1C B28(L700)':'10.140.164.134','S1C  B41(L2500)':'10.140.164.135','S1C VLAN ':'197','S1U GW ':'10.140.165.129/27','S1U B1(L2100)':'10.140.165.133','S1U B28(L700)':'10.140.165.134','S1U  B41(L2500)':'10.140.165.135','S1U VLAN':'198'},
        	{'S No':'3','4G Site ID(B28)-L700':'T4JK28SNANTP09062892','eNode-B ID B28(L700)':'120839','Site Name':'Acchabal','Lat':'33.68394','Long':'75.21822','Unique Cluster Name':'Aachbal-Cluster 1','OAM HW GW':'10.140.162.129/28','OAM HW IP':'10.140.162.132','OAM HW VLAN':'195','OAM RAC GW':'10.140.163.129/27','OAM RAC B1(L2100)':'10.140.163.136','OAM RAC B28(L700)':'10.140.163.137','OAM RAC B41(L2500)':'10.140.163.138','OAM RAC VLAN':'196','S1C GW ':'10.140.164.129/27','S1C B1(L2100)':'10.140.164.136','S1C B28(L700)':'10.140.164.137','S1C  B41(L2500)':'10.140.164.138','S1C VLAN ':'197','S1U GW ':'10.140.165.129/27','S1U B1(L2100)':'10.140.165.136','S1U B28(L700)':'10.140.165.137','S1U  B41(L2500)':'10.140.165.138','S1U VLAN':'198'},
        	{'S No':'4','4G Site ID(B28)-L700':'T4JK28SNPGMP09AH0081','eNode-B ID B28(L700)':'120112','Site Name':'Nogam Salia','Lat':'33.82159','Long':'75.27099','Unique Cluster Name':'Aachbal-Cluster 1','OAM HW GW':'10.140.162.129/28','OAM HW IP':'10.140.162.133','OAM HW VLAN':'195','OAM RAC GW':'10.140.163.129/27','OAM RAC B1(L2100)':'10.140.163.139','OAM RAC B28(L700)':'10.140.163.140','OAM RAC B41(L2500)':'10.140.163.141','OAM RAC VLAN':'196','S1C GW ':'10.140.164.129/27','S1C B1(L2100)':'10.140.164.139','S1C B28(L700)':'10.140.164.140','S1C  B41(L2500)':'10.140.164.141','S1C VLAN ':'197','S1U GW ':'10.140.165.129/27','S1U B1(L2100)':'10.140.165.139','S1U B28(L700)':'10.140.165.140','S1U  B41(L2500)':'10.140.165.141','S1U VLAN':'198'},
        	{'S No':'5','4G Site ID(B28)-L700':'T4JK28SNANTPO9SANDOO','eNode-B ID B28(L700)':'120850','Site Name':'SANDOO','Lat':'33.6991716','Long':'75.1882101','Unique Cluster Name':'Aachbal-Cluster 1','OAM HW GW':'10.140.162.129/28','OAM HW IP':'10.140.162.134','OAM HW VLAN':'195','OAM RAC GW':'10.140.163.129/27','OAM RAC B1(L2100)':'10.140.163.142','OAM RAC B28(L700)':'10.140.163.143','OAM RAC B41(L2500)':'10.140.163.144','OAM RAC VLAN':'196','S1C GW ':'10.140.164.129/27','S1C B1(L2100)':'10.140.164.142','S1C B28(L700)':'10.140.164.143','S1C  B41(L2500)':'10.140.164.144','S1C VLAN ':'197','S1U GW ':'10.140.165.129/27','S1U B1(L2100)':'10.140.165.142','S1U B28(L700)':'10.140.165.143','S1U  B41(L2500)':'10.140.165.144','S1U VLAN':'198'}
      ];

    const headers = Object.keys(pulwamaData[0] || {});

    function debounce(func, delay) {
      let timeoutId;
      return (...args) => {
        clearTimeout(timeoutId);
        timeoutId = setTimeout(() => func(...args), delay);
      };
    }

    function downloadCSV(data, filename) {
      const csv = [
        headers.join(','),
        ...data.map(row =>
          headers
            .map(header => `"${(row[header] || 'N/A').toString().replace(/"/g, '""')}"`)
            .join(',')
        )
      ].join('\n');
      const blob = new Blob([csv], { type: 'text/csv' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      a.click();
      URL.revokeObjectURL(url);
    }

    function App() {
      const [searchTerm, setSearchTerm] = React.useState('');
      const [filterColumn, setFilterColumn] = React.useState('all');
      const [sortConfig, setSortConfig] = React.useState({ key: null, direction: 'asc' });

      const debouncedSetSearchTerm = debounce(setSearchTerm, 300);

      const filteredData = React.useMemo(() => {
        return pulwamaData.filter(row =>
          filterColumn === 'all'
            ? Object.values(row).some(value =>
                value?.toString().toLowerCase().includes(searchTerm.toLowerCase())
              )
            : row[filterColumn]?.toString().toLowerCase().includes(searchTerm.toLowerCase())
        );
      }, [searchTerm, filterColumn]);

      const sortedData = React.useMemo(() => {
        if (!sortConfig.key) return filteredData;
        return [...filteredData].sort((a, b) => {
          const aValue = a[sortConfig.key] || '';
          const bValue = b[sortConfig.key] || '';
          return sortConfig.direction === 'asc'
            ? aValue.toString().localeCompare(bValue.toString())
            : bValue.toString().localeCompare(aValue.toString());
        });
      }, [filteredData, sortConfig]);

      const handleSort = (key) => {
        setSortConfig({
          key,
          direction: sortConfig.key === key && sortConfig.direction === 'asc' ? 'desc' : 'asc'
        });
      };

      return (
        <div className="container">
          <h1 className="title">Pulwama VLAN Data</h1>
          <div className="search-container">
            <label htmlFor="search-input" className="sr-only">Search VLAN data</label>
            <input
              id="search-input"
              type="text"
              placeholder="Search by any field..."
              onChange={e => debouncedSetSearchTerm(e.target.value)}
              className="search-input"
              aria-label="Search VLAN data"
            />
            <select
              value={filterColumn}
              onChange={e => setFilterColumn(e.target.value)}
              className="filter-select"
              aria-label="Select column to filter"
            >
              <option value="all">All Fields</option>
              {headers.map(header => (
                <option key={header} value={header}>
                  {header.replace(/\(L\d+\)/g, '')}
                </option>
              ))}
            </select>
            <button
              onClick={() => downloadCSV(sortedData, 'pulwama_vlan_data.csv')}
              className="export-button"
            >
              Export to CSV
            </button>
          </div>
          <div className="table-container">
            <table role="grid">
              <thead>
                <tr>
                  {headers.map(header => (
                    <th
                      key={header}
                      onClick={() => handleSort(header)}
                      scope="col"
                      aria-sort={sortConfig.key === header ? sortConfig.direction : 'none'}
                    >
                      {header.replace(/\(L\d+\)/g, '')}
                      {sortConfig.key === header && (
                        <span className="sort-icon">
                          {sortConfig.direction === 'asc' ? '↑' : '↓'}
                        </span>
                      )}
                    </th>
                  ))}
                </tr>
              </thead>
              <tbody>
                {sortedData.length === 0 ? (
                  <tr>
                    <td colSpan={headers.length} className="text-center">
                      No matching records found
                    </td>
                  </tr>
                ) : (
                  sortedData.map((row, index) => (
                    <tr key={index}>
                      {headers.map(header => (
                        <td key={header}>{row[header] || 'N/A'}</td>
                      ))}
                    </tr>
                  ))
                )}
              </tbody>
            </table>
          </div>
        </div>
      );
    }

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
